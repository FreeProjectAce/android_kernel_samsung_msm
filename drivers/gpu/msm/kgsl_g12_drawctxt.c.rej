--- drivers/gpu/msm/kgsl_g12_drawctxt.c	2011-03-16 11:04:47.000000000 +0700
+++ drivers/gpu/msm/kgsl_g12_drawctxt.c	2011-12-23 19:21:50.000000000 +0700
@@ -43,8 +43,13 @@
 {
 	struct kgsl_g12_device *g12_device = KGSL_G12_DEVICE(device);
 
-	if (g12_device->ringbuffer.prevctx == context->id)
+	kgsl_g12_idle(device, KGSL_TIMEOUT_DEFAULT);
+
+	if (g12_device->ringbuffer.prevctx == context->id) {
 		g12_device->ringbuffer.prevctx = KGSL_G12_INVALID_CONTEXT;
+		device->mmu.hwpagetable = device->mmu.defaultpagetable;
+		kgsl_setstate(device, KGSL_MMUFLAGS_PTUPDATE);
+	}
 
 	return 0;
 }
