--- drivers/gpu/msm/kgsl_g12.h	2011-03-16 11:04:47.000000000 +0700
+++ drivers/gpu/msm/kgsl_g12.h	2011-12-23 19:21:50.000000000 +0700
@@ -42,32 +46,22 @@
 
 struct kgsl_g12_device {
 	struct kgsl_device dev;    /* Must be first field in this struct */
-	const char *iomemname;
-	const char *irqname;
-	const char *regulator;
 	int current_timestamp;
 	int timestamp;
-	wait_queue_head_t wait_timestamp_wq;
 	struct kgsl_g12_ringbuffer ringbuffer;
+	spinlock_t cmdwin_lock;
 };
 
 irqreturn_t kgsl_g12_isr(int irq, void *data);
 int kgsl_g12_setstate(struct kgsl_device *device, uint32_t flags);
-struct kgsl_device *kgsl_get_2d_device(enum kgsl_deviceid);
-int kgsl_g12_regread(struct kgsl_device *device, unsigned int offsetwords,
+int kgsl_g12_idle(struct kgsl_device *device, unsigned int timeout);
+void kgsl_g12_regread(struct kgsl_device *device, unsigned int offsetwords,
 				unsigned int *value);
-int kgsl_g12_regwrite(struct kgsl_device *device, unsigned int offsetwords,
+void kgsl_g12_regwrite(struct kgsl_device *device, unsigned int offsetwords,
+			unsigned int value);
+void kgsl_g12_regread_isr(struct kgsl_device *device, unsigned int offsetwords,
+				unsigned int *value);
+void kgsl_g12_regwrite_isr(struct kgsl_device *device, unsigned int offsetwords,
 			unsigned int value);
-
-int __init kgsl_g12_config(struct kgsl_devconfig *,
-		      struct platform_device *pdev, enum kgsl_deviceid dev_id);
-
-int __init kgsl_g12_init(struct kgsl_device *device);
-int __init kgsl_g12_init_pwrctrl(struct kgsl_device *device);
-
-int kgsl_g12_close(struct kgsl_device *device);
-
-int kgsl_g12_getfunctable(struct kgsl_functable *ftbl);
-
 
 #endif /* _KGSL_G12_H */
